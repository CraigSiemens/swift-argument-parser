<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    
    <title>Getting Started with ArgumentParser| Documentation</title>
    
    <link rel="icon"       href="favicon.ico" />
    <link rel="mask-icon"  href="favicon.svg" color="#333333" />
    <link rel='stylesheet' href='css/site.css' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/default.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
  </head>
  <body>
    <div id="app">
      <div class="doc-topic">
        <nav role="navigation" class="nav documentation-nav">
  <div class="nav__wrapper">
    <div class="nav__background"></div>
    <div class="nav-content">
      <div class="nav-title">
        <span class="nav-title-link inactive">Documentation</span>
      </div>
      <div class="nav-menu">
        <div class="nav-menu-tray">
          <ul class="nav-menu-items hierarchy">
            
              <li class="nav-menu-item hierarchy-item">
                
                
                  <a href="index.html" class="item">ArgumentParser</a>
                
              </li>
            
              <li class="nav-menu-item hierarchy-item">
                
                  <span class="current item">Getting Started with ArgumentParser</span>
                
                
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<main id="main" role="main" class="main">
  <div class="topictitle">
  <span class="eyebrow">Article</span>
  <h1 class="title">Getting Started with ArgumentParser</h1>
</div>

  <div class="container content-grid">
  <div class="description">
    <div class="abstract content">
      Learn to set up and customize a simple command-line tool.
    </div>
  </div>
  
  <!-- The sidebar once we have one: <div class="summary"></div> -->
  
  <div class="primary-content">
    <div class='content'><h2 id='Overview'>Overview</h2><p>This guide walks through building an example command. You’ll learn about the different tools that <code>ArgumentParser</code> provides for defining a command’s options, customizing the interface, and providing help text for your user.</p><h2 id='Adding-ArgumentParser-as-a-Dependency'>Adding ArgumentParser as a Dependency</h2><p>Let’s write a tool called <code>count</code> that reads an input file, counts the words, and writes the result to an output file.</p><p>First, we need to add <code>swift-argument-parser</code> as a dependency to our package, and then include <code>&quot;ArgumentParser&quot;</code> as a dependency for our executable target. Our “Package.swift” file ends up looking like this:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">// swift-tools-version:5.2</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">import PackageDescription</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">let package = Package(</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    name: &quot;random&quot;,</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    dependencies: [</span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">        .package(url: &quot;https://github.com/apple/swift-argument-parser.git&quot;, from: &quot;0.4.0&quot;),</span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">    ],</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">    targets: [</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">        .target(</span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">            name: &quot;count&quot;,</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">            dependencies: [.product(name: &quot;ArgumentParser&quot;, package: &quot;swift-argument-parser&quot;)]),</span></span>
<span class="code-line-container"><span data-line-number="13" class="code-number" style="display: none;"></span><span class="code-line">    ]</span></span>
<span class="code-line-container"><span data-line-number="14" class="code-number" style="display: none;"></span><span class="code-line">)</span></span>
</code></pre>
  </div>
</div>
<aside class='note'><p class='label'>Note</p><p><p><strong>Note:</strong> To read more about creating and configuring packages using Swift Package Manager, see the Swift Package Manager documentation.</p></p></p></aside><h2 id='Building-Our-First-Command'>Building Our First Command</h2><p>Once we’ve built the <code>count</code> tool, we’ll be able to run it like this:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count readme.md readme.counts</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
</code></pre>
  </div>
</div>
<p>We’ll define the initial version of the command as a type that conforms to the <code>ParsableCommand</code> protocol:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">import ArgumentParser</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">    @Argument var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    @Argument var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws {</span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">        print(&quot;&quot;&quot;</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">            Counting words in &#39;\(inputFile)&#39; \</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">            and writing the result into &#39;\(outputFile)&#39;.</span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">            &quot;&quot;&quot;)</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">            </span></span>
<span class="code-line-container"><span data-line-number="13" class="code-number" style="display: none;"></span><span class="code-line">        // Read &#39;inputFile&#39;, count the words, and save to &#39;outputFile&#39;.</span></span>
<span class="code-line-container"><span data-line-number="14" class="code-number" style="display: none;"></span><span class="code-line">    }</span></span>
<span class="code-line-container"><span data-line-number="15" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
<span class="code-line-container"><span data-line-number="16" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="17" class="code-number" style="display: none;"></span><span class="code-line">Count.main()</span></span>
</code></pre>
  </div>
</div>
<p>In the code above, the <code>inputFile</code> and <code>outputFile</code> properties use the <code>@Argument</code> property wrapper. <code>ArgumentParser</code> uses this wrapper to denote a positional command-line input — because <code>inputFile</code> is specified first in the <code>Count</code> type, it’s the first value read from the command line, and <code>outputFile</code> is read second.</p><p>We’ve implemented the command’s logic in its <code>run()</code> method. Here, we’re printing out a message confirming the names of the files the user gave. (You can find a full implementation of the completed command at the end of this guide.)</p><p>Finally, you tell the parser to execute the <code>Count</code> command by calling its static <code>main()</code> method. This method parses the command-line arguments, verifies that they match up with what we’ve defined in <code>Count</code>, and either calls the <code>run()</code> method or exits with a helpful message.</p><h2 id='Working-with-Named-Options'>Working with Named Options</h2><p>Our <code>count</code> tool may have a usability problem — it’s not immediately clear whether a user should provide the input file first, or the output file. Instead of using positional arguments for our two inputs, let’s specify that they should be labeled options:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count --input-file readme.md --output-file readme.counts</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
</code></pre>
  </div>
</div>
<p>We do this by using the <code>@Option</code> property wrapper instead of <code>@Argument</code>:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">    @Option var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">    @Option var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws {</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">        print(&quot;&quot;&quot;</span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">            Counting words in &#39;\(inputFile)&#39; \</span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">            and writing the result into &#39;\(outputFile)&#39;.</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">            &quot;&quot;&quot;)</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">            </span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">        // Read &#39;inputFile&#39;, count the words, and save to &#39;outputFile&#39;.</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">    }</span></span>
<span class="code-line-container"><span data-line-number="13" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
</code></pre>
  </div>
</div>
<p>The <code>@Option</code> property wrapper denotes a command-line input that looks like <code>--name &lt;value&gt;</code>, deriving its name from the name of your property.</p><p>This interface has a trade-off for the users of our <code>count</code> tool: With <code>@Argument</code>, users don’t need to type as much, but they have to remember whether to provide the input file or the output file first. Using <code>@Option</code> makes the user type a little more, but the distinction between values is explicit. Options are order-independent, as well, so the user can name the input and output files in either order:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count --output-file readme.counts --input-file readme.md</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
</code></pre>
  </div>
</div>
<h2 id='Adding-a-Flag'>Adding a Flag</h2><p>Next, we want to add a <code>--verbose</code> flag to our tool, and only print the message if the user specifies that option:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count --input-file readme.md --output-file readme.counts</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">(no output)</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">% count --verbose --input-file readme.md --output-file readme.counts</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
</code></pre>
  </div>
</div>
<p>Let’s change our <code>Count</code> type to look like this:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">    @Option var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">    @Option var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">    @Flag var verbose = false</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws {</span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">        if verbose {</span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">            print(&quot;&quot;&quot;</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">                Counting words in &#39;\(inputFile)&#39; \</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">                and writing the result into &#39;\(outputFile)&#39;.</span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">                &quot;&quot;&quot;)</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">        }</span></span>
<span class="code-line-container"><span data-line-number="13" class="code-number" style="display: none;"></span><span class="code-line"> </span></span>
<span class="code-line-container"><span data-line-number="14" class="code-number" style="display: none;"></span><span class="code-line">        // Read &#39;inputFile&#39;, count the words, and save to &#39;outputFile&#39;.</span></span>
<span class="code-line-container"><span data-line-number="15" class="code-number" style="display: none;"></span><span class="code-line">    }</span></span>
<span class="code-line-container"><span data-line-number="16" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
</code></pre>
  </div>
</div>
<p>The <code>@Flag</code> property wrapper denotes a command-line input that looks like <code>--name</code>, deriving its name from the name of your property. Flags are most frequently used for Boolean values, like the <code>verbose</code> property here.</p><h2 id='Using-Custom-Names'>Using Custom Names</h2><p>We can customize the names of our options and add an alternative to the <code>verbose</code> flag so that users can specify <code>-v</code> instead of <code>--verbose</code>. The new interface will look like this:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count -v -i readme.md -o readme.counts</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">% count --input readme.md --output readme.counts -v</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">% count -o readme.counts -i readme.md --verbose</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">Counting words in &#39;readme.md&#39; and writing the result into &#39;readme.counts&#39;.</span></span>
</code></pre>
  </div>
</div>
<p>Customize the input names by passing <code>name</code> parameters to the <code>@Option</code> and <code>@Flag</code> initializers:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;input&quot;)])</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">    var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;output&quot;)])</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">    @Flag(name: .shortAndLong)</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">    var verbose = false</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws { ... }</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
</code></pre>
  </div>
</div>
<p>The default name specification is <code>.long</code>, which uses a property’s name with a two-dash prefix. <code>.short</code> uses only the first letter of a property’s name with a single-dash prefix, and allows combining groups of short options. You can specify custom short and long names with the <code>.customShort(_:)</code> and <code>.customLong(_:)</code> methods, respectively, or use the combined <code>.shortAndLong</code> property to specify the common case of both the short and long derived names.</p><h2 id='Providing-Help'>Providing Help</h2><p><code>ArgumentParser</code> automatically generates help for any command when a user provides the <code>-h</code> or <code>--help</code> flags:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count --help</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">USAGE: count --input &lt;input&gt; --output &lt;output&gt; [--verbose]</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">OPTIONS:</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">  -i, --input &lt;input&gt;      </span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">  -o, --output &lt;output&gt;    </span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">  -v, --verbose            </span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">  -h, --help              Show help information.</span></span>
</code></pre>
  </div>
</div>
<p>This is a great start — you can see that all the custom names are visible, and the help shows that values are expected for the <code>--input</code> and <code>--output</code> options. However, our custom options and flag don’t have any descriptive text. Let’s add that now by passing string literals as the <code>help</code> parameter:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;input&quot;)], help: &quot;A file to read.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line">    var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;output&quot;)], help: &quot;A file to save word counts to.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">    @Flag(name: .shortAndLong, help: &quot;Print status updates while counting.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line">    var verbose = false</span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws { ... }</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
</code></pre>
  </div>
</div>
<p>The help screen now includes descriptions for each parameter:</p><div data-syntax="" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">% count -h</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">USAGE: count --input &lt;input&gt; --output &lt;output&gt; [--verbose]</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">OPTIONS:</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">  -i, --input &lt;input&gt;     A file to read. </span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">  -o, --output &lt;output&gt;   A file to save word counts to. </span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">  -v, --verbose           Print status updates while counting. </span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">  -h, --help              Show help information.</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
</code></pre>
  </div>
</div>
<h2 id='The-Complete-Utility'>The Complete Utility</h2><p>As promised, here’s the complete <code>count</code> command, for your experimentation:</p><div data-syntax="swift" class="code-listing">
  <div class="container-general">
    <pre><code><span class="code-line-container"><span data-line-number="1" class="code-number" style="display: none;"></span><span class="code-line">import ArgumentParser</span></span>
<span class="code-line-container"><span data-line-number="2" class="code-number" style="display: none;"></span><span class="code-line">import Foundation</span></span>
<span class="code-line-container"><span data-line-number="3" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="4" class="code-number" style="display: none;"></span><span class="code-line">struct Count: ParsableCommand {</span></span>
<span class="code-line-container"><span data-line-number="5" class="code-number" style="display: none;"></span><span class="code-line">    static let configuration = CommandConfiguration(abstract: &quot;Word counter.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="6" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="7" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;input&quot;)], help: &quot;A file to read.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="8" class="code-number" style="display: none;"></span><span class="code-line">    var inputFile: String</span></span>
<span class="code-line-container"><span data-line-number="9" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="10" class="code-number" style="display: none;"></span><span class="code-line">    @Option(name: [.short, .customLong(&quot;output&quot;)], help: &quot;A file to save word counts to.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="11" class="code-number" style="display: none;"></span><span class="code-line">    var outputFile: String</span></span>
<span class="code-line-container"><span data-line-number="12" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="13" class="code-number" style="display: none;"></span><span class="code-line">    @Flag(name: .shortAndLong, help: &quot;Print status updates while counting.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="14" class="code-number" style="display: none;"></span><span class="code-line">    var verbose = false</span></span>
<span class="code-line-container"><span data-line-number="15" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="16" class="code-number" style="display: none;"></span><span class="code-line">    mutating func run() throws {</span></span>
<span class="code-line-container"><span data-line-number="17" class="code-number" style="display: none;"></span><span class="code-line">        if verbose {</span></span>
<span class="code-line-container"><span data-line-number="18" class="code-number" style="display: none;"></span><span class="code-line">            print(&quot;&quot;&quot;</span></span>
<span class="code-line-container"><span data-line-number="19" class="code-number" style="display: none;"></span><span class="code-line">                Counting words in &#39;\(inputFile)&#39; \</span></span>
<span class="code-line-container"><span data-line-number="20" class="code-number" style="display: none;"></span><span class="code-line">                and writing the result into &#39;\(outputFile)&#39;.</span></span>
<span class="code-line-container"><span data-line-number="21" class="code-number" style="display: none;"></span><span class="code-line">                &quot;&quot;&quot;)</span></span>
<span class="code-line-container"><span data-line-number="22" class="code-number" style="display: none;"></span><span class="code-line">        }</span></span>
<span class="code-line-container"><span data-line-number="23" class="code-number" style="display: none;"></span><span class="code-line"> </span></span>
<span class="code-line-container"><span data-line-number="24" class="code-number" style="display: none;"></span><span class="code-line">        guard let input = try? String(contentsOfFile: inputFile) else {</span></span>
<span class="code-line-container"><span data-line-number="25" class="code-number" style="display: none;"></span><span class="code-line">            throw RuntimeError(&quot;Couldn&#39;t read from &#39;\(inputFile)&#39;!&quot;)</span></span>
<span class="code-line-container"><span data-line-number="26" class="code-number" style="display: none;"></span><span class="code-line">        }</span></span>
<span class="code-line-container"><span data-line-number="27" class="code-number" style="display: none;"></span><span class="code-line">        </span></span>
<span class="code-line-container"><span data-line-number="28" class="code-number" style="display: none;"></span><span class="code-line">        let words = input.components(separatedBy: .whitespacesAndNewlines)</span></span>
<span class="code-line-container"><span data-line-number="29" class="code-number" style="display: none;"></span><span class="code-line">            .map { word in</span></span>
<span class="code-line-container"><span data-line-number="30" class="code-number" style="display: none;"></span><span class="code-line">                word.trimmingCharacters(in: CharacterSet.alphanumerics.inverted)</span></span>
<span class="code-line-container"><span data-line-number="31" class="code-number" style="display: none;"></span><span class="code-line">                    .lowercased()</span></span>
<span class="code-line-container"><span data-line-number="32" class="code-number" style="display: none;"></span><span class="code-line">            }</span></span>
<span class="code-line-container"><span data-line-number="33" class="code-number" style="display: none;"></span><span class="code-line">            .compactMap { word in word.isEmpty ? nil : word }</span></span>
<span class="code-line-container"><span data-line-number="34" class="code-number" style="display: none;"></span><span class="code-line">        </span></span>
<span class="code-line-container"><span data-line-number="35" class="code-number" style="display: none;"></span><span class="code-line">        let counts = Dictionary(grouping: words, by: { $0 })</span></span>
<span class="code-line-container"><span data-line-number="36" class="code-number" style="display: none;"></span><span class="code-line">            .mapValues { $0.count }</span></span>
<span class="code-line-container"><span data-line-number="37" class="code-number" style="display: none;"></span><span class="code-line">            .sorted(by: { $0.value &gt; $1.value })</span></span>
<span class="code-line-container"><span data-line-number="38" class="code-number" style="display: none;"></span><span class="code-line">        </span></span>
<span class="code-line-container"><span data-line-number="39" class="code-number" style="display: none;"></span><span class="code-line">        if verbose {</span></span>
<span class="code-line-container"><span data-line-number="40" class="code-number" style="display: none;"></span><span class="code-line">            print(&quot;Found \(counts.count) words.&quot;)</span></span>
<span class="code-line-container"><span data-line-number="41" class="code-number" style="display: none;"></span><span class="code-line">        }</span></span>
<span class="code-line-container"><span data-line-number="42" class="code-number" style="display: none;"></span><span class="code-line">        </span></span>
<span class="code-line-container"><span data-line-number="43" class="code-number" style="display: none;"></span><span class="code-line">        let output = counts.map { word, count in &quot;\(word): \(count)&quot; }</span></span>
<span class="code-line-container"><span data-line-number="44" class="code-number" style="display: none;"></span><span class="code-line">            .joined(separator: &quot;\n&quot;)</span></span>
<span class="code-line-container"><span data-line-number="45" class="code-number" style="display: none;"></span><span class="code-line">        </span></span>
<span class="code-line-container"><span data-line-number="46" class="code-number" style="display: none;"></span><span class="code-line">        guard let _ = try? output.write(toFile: outputFile, atomically: true, encoding: .utf8) else {</span></span>
<span class="code-line-container"><span data-line-number="47" class="code-number" style="display: none;"></span><span class="code-line">            throw RuntimeError(&quot;Couldn&#39;t write to &#39;\(outputFile)&#39;!&quot;)</span></span>
<span class="code-line-container"><span data-line-number="48" class="code-number" style="display: none;"></span><span class="code-line">        }</span></span>
<span class="code-line-container"><span data-line-number="49" class="code-number" style="display: none;"></span><span class="code-line">    }</span></span>
<span class="code-line-container"><span data-line-number="50" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
<span class="code-line-container"><span data-line-number="51" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="52" class="code-number" style="display: none;"></span><span class="code-line">struct RuntimeError: Error, CustomStringConvertible {</span></span>
<span class="code-line-container"><span data-line-number="53" class="code-number" style="display: none;"></span><span class="code-line">    var description: String</span></span>
<span class="code-line-container"><span data-line-number="54" class="code-number" style="display: none;"></span><span class="code-line">    </span></span>
<span class="code-line-container"><span data-line-number="55" class="code-number" style="display: none;"></span><span class="code-line">    init(_ description: String) {</span></span>
<span class="code-line-container"><span data-line-number="56" class="code-number" style="display: none;"></span><span class="code-line">        self.description = description</span></span>
<span class="code-line-container"><span data-line-number="57" class="code-number" style="display: none;"></span><span class="code-line">    }</span></span>
<span class="code-line-container"><span data-line-number="58" class="code-number" style="display: none;"></span><span class="code-line">}</span></span>
<span class="code-line-container"><span data-line-number="59" class="code-number" style="display: none;"></span><span class="code-line"></span></span>
<span class="code-line-container"><span data-line-number="60" class="code-number" style="display: none;"></span><span class="code-line">Count.main()</span></span>
</code></pre>
  </div>
</div>
</div>
  </div>
</div>

  
  
  <section id='see-also' class='contenttable alt-light'>
  <div class='container'>
    <h2 class='title'>See Also</h2>

    
      <div class="row contenttable-section">
        <div class="col section-title large-3 medium-3 small-12">
          <h3 class="title">Essentials</h3>
        </div>
  
        <div class="col section-content large-9 medium-9 small-12">
          
            <div class="link-block topic">
              
              
                <a href="CommandsAndSubcommands.html" class="link has-adjacent-elements">
                  <span class="topic-icon-wrapper">&nbsp;</span>
                  Defining Commands and Subcommands
                </a>
              
              <div class="abstract">
                <div class="content">Break complex command-line tools into a tree of subcommands.</div>
              </div>
            </div>
          
            <div class="link-block topic">
              
                <a href="ParsableCommand/index.html" class="link has-adjacent-elements">
                  <code class="decorated-title"><span class='decorator'>protocol</span><span class='decorator empty-token'> </span><span class='identifier'>ParsableCommand</span></code>
                </a>
              
              
              <div class="abstract">
                <div class="content">A type that can be executed as part of a nested tree of commands.</div>
              </div>
            </div>
          
        </div>
      </div>
    
  </div>
</section>

</main>

      </div>
    </div>
    <footer class="footer"></footer>
    <script>hljs.highlightAll();</script>
  </body>
</html>
